name: Java CI with Maven

on:
  push:
  pull_request:

jobs:

 build:
 
  runs-on: ubuntu-latest
  
  steps:
  
  - name: Clonacion de Codigo
		uses: actions/checkout@v4
  
  - name: Set up JDK
    uses: actions/setup-java@v3
		with:
		 java-version: '11'
		 distribution: 'temurin'
		 cache: maven
   
   - name: Build with Maven
		  run: mvn -B package --file pom.xml
    
    - name: Analisis SonarCloud
		  run: |
		    mvn clean verify org.sonarsource.scanner.maven:sonar-maven-plugin:3.11.0.3922:sonar \
			-Dsonar.token=${{ secrets.SONAR_TOKEN }} \
			-Dsonar.host.url=https://sonarcloud.io \
			-Dsonar.organization=luiscalquin \
			-Dsonar.projectKey=luiscalquin_microservicio-java
	  
